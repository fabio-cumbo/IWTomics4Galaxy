id: iwtomics_galaxy
name: IWTomics Tour
description: An interactive tour for the Interval-Wise Testing for omics data (IWTomics) tool for Galaxy
title_default: "Welcome to IWTomics"

steps:
    - title: "Welcome to IWTomics"
      content: ""
      backdrop: true
    
    ######################
    ## load ETn example ##
    ######################

    - title: "Upload your data"
      element: ".upload-button"
      intro: ""
      position: "right"
      postclick:
        - ".upload-button"
        - "#btn-new"
    
    - title: "Upload your data"
      element: ".upload-text-content:first"
      intro: "ETn example from GitHub repo: regions and features"
      position: "top"
      textinsert: |
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/DESCRIPTION.txt
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/ETn_fixed.bed
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/Control.bed
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/Recombination_hotspots.txt

    - title: "Start the upload of regions and features"
      element: "#btn-start"
      intro: "Upload the data into your Galaxy history."
      position: "top"
      postclick:
        - "#btn-start"

    - title: "Wait"
      element: ".upload-text-content:first"
      intro: "Wait until this block is green, than click next"
      position: "bottom"
      postclick:
        - "#btn-reset"
        - "#btn-new"

    - title: "Upload your data"
      element: ".upload-text-content:first"
      intro: "ETn example from GitHub repo: headers"
      position: "top"
      textinsert: |
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/regions_header.tabular
        https://raw.githubusercontent.com/fabio-cumbo/IWTomics4Galaxy/master/ETn_example/features_header.tabular
    
    - title: "Set headers data type"
      element: ".upload-extension:first"
      intro: "Set tabular data type for headers"
      position: "top"
      # does not work: let the user select the 'tabular' data type for headers
      #textinsert: "tabular"

    - title: "Start the upload of headers"
      element: "#btn-start"
      intro: "Upload the data into your Galaxy history."
      position: "top"
      postclick:
        - "#btn-start"

    - title: "Close upload/download manager"
      element: "#btn-close"
      intro: "Close the upload manager with this button or with a click outside of the manager window."
      position: "top"
      postclick:
        - "#btn-close"

    - title: "Description"
      element: "#current-history-panel .list-item:eq(5)"
      intro: "DESCRIPTION.txt"
      position: "left"

    - title: "ETn fixed BED"
      element: "#current-history-panel .list-item:eq(4)"
      intro: "ETn_fixed.bed.txt"
      position: "left"

    - title: "Control"
      element: "#current-history-panel .list-item:eq(3)"
      intro: "Control.bed"
      position: "left"
    
    - title: "Regions Header"
      element: "#current-history-panel .list-item:eq(2)"
      intro: "Recombination_hotspots.txt"
      position: "left"

    - title: "Recombination Hotspots"
      element: "#current-history-panel .list-item:eq(1)"
      intro: "regions.header"
      position: "left"

    - title: "Features Header"
      element: "#current-history-panel .list-item:eq(0)"
      intro: "features.header"
      position: "left"

    - title: "Search for the IWTomics suite"
      element: "#tool-search-query"
      intro: "search iwtomics"
      position: "right"

    #####################################
    ## start Load Smooth and Plot tool ##
    #####################################

    - title: "Select Load and Plot tool"
      element: 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_loadandplot%2Fiwtomics_loadandplot%2F1.0.0.0"]'
      intro: "select Load and Plot tool"
      position: "right"
      postclick:
        - 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_loadandplot%2Fiwtomics_loadandplot%2F1.0.0.0"]'

    - title: "Load and Plot popup"
      content: "Load and Plot description"
      backdrop: true

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="regions"]'
      intro: "select regions"
      position: "bottom"
      # does not work: let the user select the input
      #preclick:
        #- >-
          #div[tour_id$="regions"] > div[class$="ui-form-field"] > 
          #div[class$="ui-select-content"] > div[class$="ui-select"] > 
          #select[class$="select"] > option:eq(3)
        #- >-
          #div[tour_id$="regions"] > div[class$="ui-form-field"] > 
          #div[class$="ui-select-content"] > div[class$="ui-select"] > 
          #select[class$="select"] > option:eq(4)
    
    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="regionsheader"]'
      intro: "regions header"
      position: "bottom"
      # does not work: let the user select the input
      #preclick:
        #- 'div[tour_id$="regionsheader"] ul[role$="listbox"] li:eq(3)' # oppure 2 se 'Nothing selected' non conta

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="features"]'
      intro: "features"
      position: "bottom"
      # does not work: let the user select the input
      #preclick:
        #- >-
          #div[tour_id$="features"] > div[class$="ui-form-field"] > 
          #div[class$="ui-select-content"] > div[class$="ui-select"] > 
          #select[class$="select"] > option:eq(1)

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="featuresheader"]'
      intro: "features header"
      position: "top"
      # does not work: let the user select the input
      #preclick:
        #- 'div[tour_id$="featuresheader"] ul[role$="listbox"] li:eq(1)' # oppure 0 se 'Nothing selected' non conta

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="zerobased"]'
      intro: "start position"
      position: "top"
    
    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="conditionaltype|smoothing"]'
      intro: "smoothing"
      position: "top"

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="conditionaltype|alignment"]'
      intro: "alignment"
      position: "top"

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|average"]'
      intro: "plot the mean curves"
      position: "top"
    
    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|size"]'
      intro: "plot sample size in each position"
      position: "top"

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|plottype"]'
      intro: "plot type"
      position: "top"

    - title: "Select Load and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|probabilitiessection|prob0"]'
      intro: "probabilities"
      position: "top"

    - title: "Execute Load and Plot tool"
      element: '#execute'
      intro: "execute Load and Plot tool"
      position: "right"
      postclick:
        - '#execute'

    - title: "Load and Plot executed"
      content: "wait for the generation of the output files, than click next."
      backdrop: true

    - title: "IWTomicsData Object"
      element: "#current-history-panel .list-item:eq(3)"
      intro: "IWTomicsData Object"
      position: "left"
    
    - title: "Region Dataset IDs"
      element: "#current-history-panel .list-item:eq(2)"
      intro: "Region Dataset IDs"
      position: "left"

    - title: "Feature IDs"
      element: "#current-history-panel .list-item:eq(1)"
      intro: "Feature IDs"
      position: "left"

    - title: "Plotted Data"
      element: "#current-history-panel .list-item:eq(0)"
      intro: "Plotted Data"
      position: "left"
    
    - title: "Load and Plot completed"
      content: "The Load and Plot tool has completed. Close the tour or continue to the next tool Test and Plot"
      backdrop: true
    
    ##############################
    ## start Test and Plot tool ##
    ##############################

    - title: "Select Test and Plot tool"
      element: 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_testandplot%2Fiwtomics_testandplot%2F1.0.0.0"]'
      intro: "select Test and Plot tool"
      position: "right"
      postclick:
        - 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_testandplot%2Fiwtomics_testandplot%2F1.0.0.0"]'

    - title: "Test and Plot"
      content: "Test and Plot tool description"
      backdrop: true

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="rdata"]'
      intro: "select rdata"
      position: "bottom"
    
    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="regionids"]'
      intro: "select regionids"
      position: "bottom"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="featureids"]'
      intro: "select featureids"
      position: "bottom"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="regionssection|regions_0|region0"]'
      intro: "select two-sample test"
      position: "top"
    
    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="featureslist"]'
      intro: "select features list"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="conditionalstatistics|statistics"]'
      intro: "select test statistics"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="permutations"]'
      intro: "select numer of permutations"
      position: "top"
    
    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|alpha"]'
      intro: "select the level of the test"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|average"]'
      intro: "plot the mean curves"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|size"]'
      intro: "plot sample size in each position"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|plottype"]'
      intro: "select plot type"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|probabilitiessection|prob0"]'
      intro: "select probabilities"
      position: "top"

    - title: "Select Test and Plot inputs and parameters"
      element: 'div[tour_id$="plotsum|conditionalgroupby|groupby"]'
      intro: "summary plot"
      position: "top"

    - title: "Execute Test and Plot tool"
      element: '#execute'
      intro: "execute Test and Plot tool"
      position: "right"
      postclick:
        - '#execute'

    - title: "Test and Plot executed"
      content: "wait for the generation of the output files, than click next."
      backdrop: true

    - title: "Adjusted p-value Matrix"
      element: "#current-history-panel .list-item:eq(5)"
      intro: "Adjusted p-value Matrix"
      position: "left"

    - title: "Plotted Test Results"
      element: "#current-history-panel .list-item:eq(4)"
      intro: "Plotted Test Results"
      position: "left"

    - title: "Summary Plot"
      element: "#current-history-panel .list-item:eq(3)"
      intro: "Summary Plot"
      position: "left"
    
    - title: "IWTomicsData Object with Test Results"
      element: "#current-history-panel .list-item:eq(2)"
      intro: "IWTomicsData Object with Test Results"
      position: "left"

    - title: "Test IDs"
      element: "#current-history-panel .list-item:eq(1)"
      intro: "Test IDs"
      position: "left"

    - title: "Feature IDs"
      element: "#current-history-panel .list-item:eq(0)"
      intro: "Feature IDs"
      position: "left"

    - title: "Test and Plot completed"
      content: "The Test and Plot tool has completed. Close the tour or continue to the next tool Plot with Threshold on Test Scale"
      backdrop: true

    #############################################
    ## start Plot with Threshold on Test Scale ##
    #############################################

    - title: "Select Plot with Threshold on Test Scale tool"
      element: 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_plotwithscale%2Fiwtomics_plotwithscale%2F1.0.0.0"]'
      intro: "select Plot with Threshold on Test Scale tool"
      position: "right"
      postclick:
        - 'a[href$="tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fiwtomics_plotwithscale%2Fiwtomics_plotwithscale%2F1.0.0.0"]'

    - title: "Plot with Threshold on Test Scale"
      content: "Plot with Threshold on Test Scale tool description"
      backdrop: true

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="rdata"]'
      intro: "select rdata"
      position: "bottom"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="testids"]'
      intro: "select test ids"
      position: "bottom"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="featureids"]'
      intro: "select feature ids"
      position: "bottom"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="scalesection|thresholdontestscale_0|test"]'
      intro: "select threshold on test scale: test id"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="scalesection|thresholdontestscale_0|feature"]'
      intro: "select threshold on test scale: feature id"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="scalesection|thresholdontestscale_0|scale"]'
      intro: "select threshold on test scale: scale"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotres|alpha"]'
      intro: "select level of the test: alpha"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotres|average"]'
      intro: "plot the mean curves"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotres|size"]'
      intro: "plot sample size in each position"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|plottype"]'
      intro: "select plot type"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotres|conditionalplottype|probabilitiessection|prob0"]'
      intro: "select probabilities"
      position: "top"

    - title: "Select Plot with Threshold on Test Scale inputs and parameters"
      element: 'div[tour_id$="plotsum|conditionalgroupby|groupby"]'
      intro: "summary plot"
      position: "top"

    - title: "Execute Plot with Threshold on Test Scale tool"
      element: '#execute'
      intro: "execute Plot with Threshold on Test Scale tool"
      position: "right"
      postclick:
        - '#execute'

    - title: "Plot with Threshold on Test Scale executed"
      content: "wait for the generation of the output files, than click next."
      backdrop: true

    - title: "Adjusted p-value"
      element: "#current-history-panel .list-item:eq(2)"
      intro: "Adjusted p-value"
      position: "left"

    - title: "Plotted Test Results"
      element: "#current-history-panel .list-item:eq(1)"
      intro: "Plotted Test Results"
      position: "left"

    - title: "Summary Plot"
      element: "#current-history-panel .list-item:eq(0)"
      intro: "Summary Plot"
      position: "left"

    - title: "End of the tour"
      content: "The tour is completed. Enjoy!"
      backdrop: true
